# Kittygram (Final)

![Status workflow.](https://github.com/Anquientas/kittygram_final/actions/workflows/main.yml/badge.svg)

Проект предназначен для просмотра фотографий кошек, выкладываемых их хозяевами

Хозяева могут зарегистрировать несколько питомцев. Они не могут повторятся. Для кажого питомца можно загрузить несколько фотографий

Редактирование фотографий доступно лишь хозяевам своих питомцев, для других же - только просмотр

Максимальный размер файлов фотографий - 20 Мб

## Стек проекта

Python, Django, Django REST framework, PostgreSQL, Docker

Используемые библиотеки и пакеты сохранены в файле requirements.txt

## Как запустить проект

Предполагается развертывание проекта на виртуальной машине

В файле kittygram_workflow.yml содержится копия файла main.yml для выполнения автоматического деплоя (развертывания) на сервере.

Для работы требуется:

- скорректировать файл ```.github/workflow/main.yml``` (пути на сервере, параметры в зависимости от настроек сервера)
- заполнить файл ```.env``` м параметрами, указанными в ```.env.example``` (см. подраздел "**Параметры .env**") и скопировать его в предполагаемую директорию развертывания
- добавить в секреты GitHub следующие параметры:
    + пароль от Docker Hub (```DOCKER_PASSWORD```)
    + никнейм в Docker Hub (```DOCKER_USERNAME```)
    + публичный IP сервера (```HOST```)
    + закрытый SSH-ключ для доступа к серверу (```SSH_KEY```)
    + код доступа к серверу (```SSH_PASSPHRASE```)
    + ID вашего Telegram (```TELEGRAM_TO```)
    + Токен Telegram-бота, проводящий рассылку сообщений (```TELEGRAM_TOKEN```)
    + Никнейм на сервере (```USER```)
- запушить (залить, отправить) изменения на GitHub и ожидать окончания автоматического деплоя

Предусмотрена возможность полуручного деплоя проекта на сервер с применением файла ```docker-compose.production.yml```, лежащего в корне репозитория

## Параметры .env

В файле .env.example содержатся следующие параметры:

- DATABASES
- POSTGRES_DB
- POSTGRES_USER
- POSTGRES_PASSWORD
- DB_HOST
- DB_PORT
- SECRET_KEY
- DEBUG
- ALLOWED_HOSTS

Если параметру ```DATABASES``` ничего не присвоить, то по умолчанию используется база данных (БД) PostgreSQL. Тогда требуется присвоение значений параметрам ```POSTGRES_DB```, ```POSTGRES_USER```, ```POSTGRES_PASSWORD```, ```DB_HOST```, ```DB_PORT```. В противном случае - SQLite3.

Параметр ```POSTGRES_DB```определяет имя базы данных

Параметр ```POSTGRES_USER```определяет имя пользователя, от лица которого происходит работа с БД

Параметр ```POSTGRES_PASSWORD```определяет пароль пользователя, указанного в ```POSTGRES_USER```, для доступа к БД

Параметр ```DB_HOST```определяет адрес, по которому Django будет соединяться с базой данных

Параметр ```DB_PORT```определяет порт, по которому Django будет обращаться к базе данных. 5432 — это порт по умолчанию для PostgreSQL

Параметр ```SECRET_KEY```содержит ***SECRET_KEY*** Django-проекта

Параметр ```DEBUG```определяет использование режима разработчика. По умлочанию - значение ***False***. Значение ***True*** включит режим отладки

Параметр ```ALLOWED_HOSTS```определяет адреса, у которых есть доступ к проекту. ***Разделительный символ при перечислении адресов - один пробел***

## Авторы

Владимир Матасов ([GitHub](https://github.com/Anquientas/)) - разработка деплоя

Евгений Салахутдинов ([GitHub](https://github.com/EugeneSal)) - ревью
